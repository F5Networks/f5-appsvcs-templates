contentType: application/json
bigipHideTemplate: true
definitions:
  vlans_allow:
    title: Allow or Reject VLANs
    description: Names of existing VLANs to add to this virtual server to allow. Check to enable VLAN allow list, uncheck to enable VLAN reject list.
    type: boolean
    default: true
  allowVlans:
    title: VLAN Allow List
    description: Check for Allow list, uncheck for Reject list.
    type: array
      uniqueItems: true
      items:
        type: string
        enumFromBigip: /net/vlans 
      default: []
  make_rejectVlans_profile:
    title: Reject Virtual Server VLANS
    description: Check to include names of existing VLANS to add to this virtual serve to reject.
    type: boolean
    default: false
  rejectVlans:
    title: VLAN Reject List
    description: Hold the *control* key to select multiple VLANS to be rejected by the virtual server.
    type: array
    uniqueItems: true
    items:
      type: string
      enumFromBigip: /net/vlans 
    default: []
  vlans_enable:
  title: Enable VLAN
    description: Select to enable VLANs.
    type: boolean
  vlan_names:
    title: VLAN Names
    description: List of BIG-IP VLANs.
    type: array 
    template: |
{
    "{{tenant_name}}": {
      "{{app_name}}": {
        "{{app_name}}": {
          {{#vlans_enable}}
            {{#vlans_allow}}
              "allowVlans": [
            {{/vlans_allow}}
            {{^vlans_allow}}
              "rejectVlans": [
            {{/vlans_allow}}
            {{#vlan_names}}
            { "bigip": {{ . }} },
            {{/vlan_names}}
            ]
          {{/vlans_enable}}
        }
      }
    }
  }