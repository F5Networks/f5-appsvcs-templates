contentType: application/json
bigipHideTemplate: true
definitions:
  common_tcp_profile:
    title: Use the same TCP profile for ingress and egress traffic.
    type: boolean
    default: false
  make_tcp_profile:
    title: Automatically manage the TCP profile.
    type: boolean
    default: true
  tcp_topology:
    title: Specify the type of network that connects both clients and servers to the BIG-IP system.
    type: string
    enum:
      - lan
      - wan
      - mobile
    default: wan
  tcp_profile_name:
    title: Specify the name of an existing BIG-IP TCP profile.
    type: string
    enumFromBigip: ltm/profile/tcp
    default: "/Common/f5-tcp-progressive"
  make_tcp_ingress_profile:
    title: Automatically manage the ingress TCP profile.
    type: boolean
    default: true
  tcp_ingress_topology:
    title: Specify the type of network that connects clients to the BIG-IP system.
    type: string
    enum:
      - lan
      - wan
      - mobile
    default: wan
  tcp_ingress_profile_name:
    title: Specify the name of an existing BIG-IP TCP profile for client-side context.
    type: string
    enumFromBigip: ltm/profile/tcp
    default: "/Common/f5-tcp-progressive"
  make_tcp_egress_profile:
    title: Automatically manage the egress TCP profile.
    type: boolean
    default: true
  tcp_egress_topology:
    title: Specify the type of network that connects servers to the BIG-IP system.
    type: string
    enum:
      - lan
      - wan
      - mobile
    default: lan
  tcp_egress_profile_name:
    title: Specify the name of an existing BIG-IP TCP profile for server-side context.
    type: string
    enumFromBigip: ltm/profile/tcp
    default: "/Common/f5-tcp-progressive"
template: |
  {
    "{{tenant_name}}": {
      "{{app_name}}": {
        "{{app_name}}": {
          {{#common_tcp_profile}}
            {{#make_tcp_profile}}
              "profileTCP": "{{tcp_topology}}",
            {{/make_tcp_profile}}
            {{^make_tcp_profile}}
              "profileTCP": {
                "bigip": "{{tcp_profile_name}}"
              },
            {{/make_tcp_profile}}
          {{/common_tcp_profile}}
          {{^common_tcp_profile}}
          "profileTCP": {
              {{#make_tcp_ingress_profile}}
                "ingress": "{{tcp_ingress_topology}}",
              {{/make_tcp_ingress_profile}}
              {{^make_tcp_ingress_profile}}
                "ingress": {
                  "bigip": "{{tcp_ingress_profile_name}}"
                },
              {{/make_tcp_ingress_profile}}
              {{#make_tcp_egress_profile}}
                "egress": "{{tcp_egress_topology}}"
              {{/make_tcp_egress_profile}}
              {{^make_tcp_egress_profile}}
                "egress": {
                  "bigip": "{{tcp_egress_profile_name}}"
                }
              {{/make_tcp_egress_profile}}
           },
          {{/common_tcp_profile}}
        }
      }
    }
  }