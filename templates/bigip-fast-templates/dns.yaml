contentType: application/json
title: DNS Application Template
description: Configure high availability and optimization for DNS implementations.
allOf:
  - $ref: "_as3.yaml#"
  - $ref: "_virtual.yaml#/dns"
  - $ref: "_snat.yaml#/dns"
  - $ref: "_pool.yaml#/dns"
  - $ref: "_monitors.yaml#/dns"
  - $ref: "_irule.yaml#/dns"
anyOf:
  - {}
  - $ref: "_analytics.yaml#/dns"
  - $ref: "_security_firewall.yaml#/dns"
  - title: Telemetry
    contentType: application/json
    bigipHideTemplate: true
    bigipDependencies:
      - ts
    definitions:
      enable_telemetry:
        title: Forward logs to Telemetry Streaming
        type: boolean
        default: false
    anyOf:
      - {}
      - title: ASM Logging
        contentType: application/json
        bigipDependencies:
          - asm
        definitions:
            enable_telemetry:
                type: boolean
        template: |
          {
            "{{tenant_name}}": {
              "{{app_name}}": {
                {{#enable_telemetry}}
                "{{app_name}}_tcp": {
                  "securityLogProfiles": [
                    { "use": "telemetry_asm_security_log_profile" },
                  ]
                },
                "{{app_name}}_udp": {
                  "securityLogProfiles": [
                    { "use": "telemetry_asm_security_log_profile" },
                  ]
                }
                {{/enable_telemetry}}
              }
            }
          }
      - title: AFM Logging
        contentType: application/json
        bigipDependencies:
          - afm
          - asm
        definitions:
            enable_telemetry:
                type: boolean
        template: |
          {
            "{{tenant_name}}": {
              "{{app_name}}": {
                {{#enable_telemetry}}
                "{{app_name}}_tcp": {
                  "securityLogProfiles": [
                    { "use": "telemetry_afm_security_log_profile" },
                  ]
                },
                "{{app_name}}_udp": {
                  "securityLogProfiles": [
                    { "use": "telemetry_afm_security_log_profile" },
                  ]
                }
                {{/enable_telemetry}}
              }
            }
          }
    template: |
      {
        "{{tenant_name}}": {
          "{{app_name}}": {
            {{#enable_telemetry}}
            "{{app_name}}_tcp": {
              "profileTrafficLog": {
                "use": "telemetry_traffic_log_profile"
              }
            },
            "{{app_name}}_udp": {
              "profileTrafficLog": {
                "use": "telemetry_traffic_log_profile"
              }
            }
            {{/enable_telemetry}}
          }
        }
      }
template: |
  {
    "{{tenant_name}}": {
      "{{app_name}}": {
        "{{app_name}}_tcp": {
          "class": "Service_TCP",
          "profileTCP": {
            "ingress": "wan",
            "egress": "lan"
          }
        },
        "{{app_name}}_udp": {
          "class": "Service_UDP",
          "profileUDP": {
            "bigip": "/Common/udp_gtm_dns"
          },
          "profileDNS": {
            "bigip": "/Common/dns"
          }
        }
      }
    }
  }
